"use strict";function asyncGeneratorStep(e,t,o,n,r,s,a){try{var c=e[s](a),l=c.value}catch(e){return void o(e)}c.done?t(l):Promise.resolve(l).then(n,r)}function _asyncToGenerator(c){return function(){var e=this,a=arguments;return new Promise(function(t,o){var n=c.apply(e,a);function r(e){asyncGeneratorStep(n,t,o,r,s,"next",e)}function s(e){asyncGeneratorStep(n,t,o,r,s,"throw",e)}r(void 0)})}}document.addEventListener("DOMContentLoaded",function(){var t=document.querySelector(".header"),e=document.querySelector(".burger-menu"),o=document.querySelector(".menu"),n=document.querySelector(".header__logo"),r=(document.querySelectorAll('a[href*="#"]'),0);window.addEventListener("scroll",function(){var e=document.documentElement.scrollTop;r<e?t.classList.add("out"):t.classList.remove("out"),0==e?t.classList.add("top"):t.classList.remove("top"),r=e}),e.addEventListener("click",function(){t.classList.toggle("mobile"),n.classList.toggle("hide"),o.classList.toggle("show"),e.classList.toggle("menu-on")}),window.addEventListener("scroll",function(){t.classList.remove("mobile"),n.classList.remove("hide"),o.classList.remove("show"),e.classList.remove("menu-on")});var s=document.querySelector(".about__btn"),a=document.querySelector(".about__hidden");s&&a&&s.addEventListener("click",function(){a.style.maxHeight&&a.style.marginBottom?(a.style.maxHeight=null,a.style.marginBottom=null,s.textContent="Загрузить еще"):(a.style.maxHeight=a.scrollHeight+"px",a.style.marginBottom="35px",s.textContent="Скрыть")});var c,l,d=document.querySelectorAll(".repair__item"),i=document.querySelector(".repair__btn");l=c=document.documentElement.clientWidth<=1135?2:3,i&&(function(t){d.length>t?i.style.display="":i.style.display="none";var o=0;d.forEach(function(e){t<=o&&e.classList.add("hide"),o++})}(c),i.addEventListener("click",function(){var e=document.querySelectorAll(".repair__item.hide"),t=e.length,o=0;e.forEach(function(e){o<l&&(e.classList.remove("hide"),o++)}),t<=o&&(i.style.display="none")}))});var formContacts=document.querySelector(".contacts__form"),formCalc=document.querySelector(".calc-form");function formSend(e){return _formSend.apply(this,arguments)}function _formSend(){return(_formSend=_asyncToGenerator(regeneratorRuntime.mark(function e(t){var o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),o=new FormData(this),e.next=4,fetch("sendmail.php",{method:"POST",body:o});case 4:if((o=e.sent).ok)return e.next=8,o.json();e.next=13;break;case 8:e.sent,this.reset(),openModalForm(),e.next=14;break;case 13:alert("Ошибка");case 14:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}formContacts&&(formContacts.addEventListener("submit",formSend),formCalc.addEventListener("submit",formSend));var modalForm=document.querySelector(".modal-form"),modalCloselBtn=document.querySelector("[data-close]");function openModalForm(){modalForm.classList.add("show"),modalForm.classList.remove("hide"),document.body.style.overflow="hidden"}function closeModalForm(){modalForm.classList.add("hide"),modalForm.classList.remove("show"),document.body.style.overflow=""}modalForm&&(modalForm.addEventListener("click",function(e){e.target===modalForm&&closeModalForm()}),modalCloselBtn.addEventListener("click",closeModalForm)),document.addEventListener("keydown",function(e){"Escape"===e.code&&modalForm.classList.contains("show")&&closeModalForm()});